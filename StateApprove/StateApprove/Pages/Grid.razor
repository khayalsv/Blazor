@page "/grid"

@inject IRoleService roleService


<div class="row">
    <div class="col-6">

        <TelerikGrid Data=@GridData EditMode="@GridEditMode.Incell"
                     Height="500px"
                     Pageable="true" PageSize=@PageSize OnUpdate=@UpdateItem OnDelete=@DeleteItem OnCreate=@CreateItem
                     OnRowClick="@OnRowClickHandler">
            <GridToolBar>
                <GridCommandButton Command="Add" Icon="add">Add Role</GridCommandButton>
            </GridToolBar>
            <GridColumns>
                <GridColumn Field=@nameof(Role.Name) Title="Approve Stage Details Name" />
                <GridColumn Field=@nameof(Role.Sequence) Title="Sequence" />
                <GridCommandColumn Title="Action">
                    <GridCommandButton Command="Delete" Icon="delete">Delete</GridCommandButton>
                </GridCommandColumn>
            </GridColumns>
        </TelerikGrid>
    </div>

    <div class="col-6">

    @if (true)
    {
        <TelerikGrid Data="@aboutList" AutoGenerateColumns="true"
                 Pageable="true" PageSize="4" Width="700px">
        </TelerikGrid>
    }
        </div>


</div>


@code {


    int PageSize = 15;
    public List<Role>? GridData { get; set; }
    public List<About> aboutList{ get; set; }
    Role selectModel;

    protected override void OnInitialized()
    {
        LoadData();
        aboutList = new List<About>();
    }

    //Role

    private void LoadData()
    {
        GridData = roleService.GetRoles().ToList();

    }



    private void CreateItem(GridCommandEventArgs args)
    {
        roleService.CreateRole((Role)args.Item);
        LoadData();
    }

    private void DeleteItem(GridCommandEventArgs args)
    {
        roleService.DeleteRole((Role)args.Item);
        LoadData();
    }

    private void UpdateItem(GridCommandEventArgs args)
    {
        roleService.UpdateRole((Role)args.Item);
        LoadData();
    }

    void OnRowClickHandler(GridRowClickEventArgs args)
    {
        selectModel= args.Item as Role;
    }
}